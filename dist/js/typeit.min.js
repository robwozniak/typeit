"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var DEFAULT_SPEED=95,DEFAULT_DELAY=650,DEFAULT_TYPEIT_CLASS="typeit",Typeit=function(){function n(e,t){_classCallCheck(this,n),t&&t.words&&(this.element=e instanceof Element?e:document.querySelector(e),this.initWord=this.element.textContent,this.words=this.initWord?[this.initWord].concat(t.words):t.words,this.speed=t.speed||DEFAULT_SPEED,this.delay=t.delay||DEFAULT_DELAY,this.letterTag=t.letterTag||!1,this.letterClass=t.letterClass||!1,this.backwards=t.backwards||!1,this.leaveLast=t.leaveLast||!1,this.isInfinity=t.infinity&&!t.leaveLast||!1,this.onType=t.onType||!1,this.onClear=t.onClear||!1,this.onComplete=t.onComplete||!1,this.events={onType:!1,onClear:!1,onComplete:!1},this.element.classList.add(DEFAULT_TYPEIT_CLASS),this.initBaseEvents(),this.initTypeLoop(),t.infinity&&t.leaveLast&&console.warn("Both infinity and leaveLast options are selected. Loop will be disabled. Please update your settings."))}return _createClass(n,[{key:"initBaseEvents",value:function(){var n=this,e=function(t){n.events.hasOwnProperty(t)&&(n.events[t]=new Event(t),n.element.addEventListener(t,function(e){n[t]instanceof Function&&n[t].call(e,e,e.detail)}))};for(var t in this.events)e(t)}},{key:"updateBaseEventsDetailData",value:function(e){for(var t in this.events)this.events.hasOwnProperty(t)&&(this.events[t].detail=e)}},{key:"initTypeLoop",value:function(){for(var n=this,e=function(e,t){t=t.then(function(){return n.isLastWord=n.words.length-1===e,n.updateBaseEventsDetailData(n.words[e]),n.type(n.words[e]).then(function(){return n.wait(n.delay)}).then(function(){return n.clear(n.words[e])})}).then(function(){n.isInfinity&&n.isLastWord?n.initTypeLoop():!n.isInfinity&&n.isLastWord&&n.element.dispatchEvent(n.events.onComplete)}),i=t},t=0,i=Promise.resolve();t<this.words.length;t++)e(t,i)}},{key:"prepareLetter",value:function(e){return this.letterTag?"<"+this.letterTag+' class="'+(this.letterClass||"")+'">'+e+"</"+this.letterTag+">":e}},{key:"type",value:function(i){var s=this;return new Promise(function(e){if(s.element.textContent)e(i);else{s.element.dispatchEvent(s.events.onType);var t=0,n=setInterval(function(){if(!i[t])return clearInterval(n),void e(i);s.element.insertAdjacentHTML("beforeend",s.prepareLetter(i[t])),t++},s.speed)}})}},{key:"wait",value:function(t){return new Promise(function(e){return setTimeout(function(){return e(t)},t)})}},{key:"clear",value:function(n){var i=this;return new Promise(function(e){if(i.leaveLast&&i.isLastWord)e(n);else{i.element.dispatchEvent(i.events.onClear);var t=setInterval(function(){if(!i.backwards||!i.element.textContent)return i.element.textContent="",clearInterval(t),void e(i.element.textContent);i.element.removeChild(i.element.lastChild)},i.speed)}})}}]),n}();try{module.exports=Typeit}catch(e){console.warn(e)}